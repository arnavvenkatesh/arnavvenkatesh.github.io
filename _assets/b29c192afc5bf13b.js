(globalThis["webpackChunk_canva_web"] = globalThis["webpackChunk_canva_web"] || []).push([[89788],{

/***/ 334378:
function(_, __, __webpack_require__) {__webpack_require__.n_x = __webpack_require__.n;const __web_req__ = __webpack_require__;__web_req__(905716);globalThis._5f74ec40302898c5a55451c9fbd04240 = globalThis._5f74ec40302898c5a55451c9fbd04240 || {};(function(__c) {var Y=__c.Y;var H=__c.H;
var fqc=async function(a,b){b=b.ydb.map(c=>a.HUa[c]).filter(c=>!!c);return new eqc({closedCaptions:b})},hqc=function(a,b){const c=[];let d=0,e=0;for(;d<a.length&&e<b.length;){const f=a[d],g=b[e];gqc(f,g)?(c.push(f),d++,e++):f.ys<g.ys?(c.push(f),d++):(c.push(g),e++)}for(;d<a.length;)c.push(a[d]),d++;for(;e<b.length;)(a=c?.[c.length-1])&&gqc(a,b[e])||c.push(b[e]),e++;return c},jqc=async function(a){for(var b of a.Xz.keys()){const c=a.BIa.get(b)??0;c>=100?a.L2(b):a.BIa.set(b,c+1)}b=Array.from(a.Xz,([c,
d])=>({id:c,sd:d}));b=await iqc(a,b);(await Promise.allSettled(b.closedCaptions.map(async c=>{if(c.bu){var d=a.Xz.get(c.bu);a.Oka(c,d);c.status==="IMPORTED"&&await a.zBa(c.bu,c.O5)}}))).forEach(c=>{c.status==="rejected"&&a.J?.error(c.reason)})},lqc=function(a){var b=window;let c;const d=()=>{c=b.setTimeout(async()=>{jqc(a).catch(e=>a.J?.error(e)).finally(()=>c!=null&&d())},1E4)};kqc(()=>a.J8a,e=>{e?d():(b.clearTimeout(c),c=void 0)},{fireImmediately:!0})},iqc=async function(a,b){b=new mqc({ydb:b.map(c=>
c.id),fNb:b.map(c=>c.sd).filter(__c.qb),ODa:void 0,ivb:!0});return await fqc(a.wY,b)},oqc=async function(a,b){b.forEach(h=>{a.nLa(h.id,h.sd)});const c=(await iqc(a,b).catch(h=>{b.forEach(k=>a.L2(k.id));throw Error(h);})).closedCaptions,d=new Map,[e,f]=__c.lD(b,h=>c.some(k=>k.bu===h.id&&k.ODa===void 0));e.forEach(h=>{const k=c.find(l=>l.bu===h.id);k&&(d.set(h.id,k.O5),a.Oka(k,h.sd))});const g=f.map(async h=>{const k=await nqc(a,h);a.Oka(k,h.sd);d.set(h.id,k.O5)});(await Promise.allSettled(g)).forEach(h=>
{h.status==="rejected"&&a.J?.error(h.reason)});return d},nqc=async function(a,b){try{const c=await a.Qha(b);return(await a.ela(c.X5.id,b.sd)).X5}catch(c){throw a.L2(b.id),c;}},pqc=async function(a,b){const c=__c.z(b.url);a=await a.fetch(c);__c.x(Array.isArray(a));a=a.map(d=>{d=__c.ra(d);return{text:__c.KGa.required("text",d),ys:__c.fab.optional("startTimeUs",d)||0,K:__c.fab.optional("durationUs",d)||0}});return{url:c,hob:{AN:b.AN,Nga:a,Jla:!0}}},gqc=function(a,b){return a.ys<b.ys+b.K&&a.ys+a.K>b.ys},
qqc=H(()=>({Xbc:__c.X(1),params:(0,__c.lJ)(2)})),rqc=H(()=>({X5:__c.Oa(1,__c.GX),egc:__c.G(2,qqc)})),sqc=H(()=>({X5:__c.Oa(1,__c.GX)}));__c.yI.prototype.ela=__c.fa(28,async function(){return new sqc({X5:__c.HX})});__c.yI.prototype.KY=__c.fa(27,async function(){throw Error("Not implemented");});__c.yI.prototype.Qha=__c.fa(26,async function(){return new rqc({X5:__c.HX})});var eqc=H(()=>({closedCaptions:__c.Pa(1,__c.GX)})),J3=__webpack_require__(186901),tqc=J3.EW,uqc=J3.h5,kqc=J3.mJ,K3=J3.sH,L3=J3.XI;var vqc=__webpack_require__(477176).B7;var wqc=H(()=>({bu:__c.X(1),Tca:Y(2),eNa:__c.eJ(3)}));var mqc=H(()=>({type:__c.F("A?",1,"SOURCEIDS"),ydb:__c.hJ(1),fNb:__c.hJ(2),ODa:Y(3),ivb:__c.jJ(4)}));var xqc=H(()=>({$7a:Y(1),vbc:Y(2),type:__c.F("A?",3,"AUTO"),bu:__c.X(31),TO:__c.jJ(32),ZH:Y(33),Tca:Y(34)}));var yqc=H(()=>({id:__c.X(1),Tca:Y(2)}));var zqc;
zqc=class{static G(a){__c.L(a,{oY:K3.shallow,Xz:K3.shallow,Z7:K3.shallow,BIa:K3.shallow,Iqa:L3,J8a:tqc,aLa:L3,nLa:L3,L2:L3.bound,zBa:L3,Oka:L3.bound})}pka(a){return this.oY.get(a)}Iqa(a,b){this.oY.set(a,b);this.Z7.delete(a)}sEa(a){return this.Xz.has(a)&&!this.oY.has(a)}get J8a(){return this.Xz.size>0}get pEa(){return this.D_.LV}aLa(a){this.D_.LV=a}nLa(a,b){this.Xz.set(a,b)}Hla(a){return this.Z7.has(a)}L2(a){this.Z7.add(a);this.Xz.delete(a)}async BLa({media:a,yKb:b,onError:c}){if(!this.wY.KY)return!1;if(this.oY.get(a.id)?.Jla||
this.Hla(a.id))return!0;this.dda.get(a)&&(this.J?.IA("Requesting new connection for media with existing connection"),this.mea(a));var d=this.LRa+(window.navigator.connection?.rtt??0)*1E3*2;const e=performance.now();d=await this.KY(a.id,a.sd,a.Ar+d);let f=!1;this.dda.set(a,d.subscribe(g=>{uqc(()=>{if(!f&&g.resultType!==3){const h=(performance.now()-e)*1E3;h>3E6&&b&&(this.LRa=h)}f=!0;g.$K.length&&this.d1(a.id,g)})},g=>{c?.();this.dda.delete(a);this.L2(a.id);this.J?.error(g)}));return!0}mea(a){this.dda.get(a)?.unsubscribe();
this.dda.delete(a)}d1(a,b){var c=this.oY.get(a);if(!c?.Jla)if(b.resultType===3)b={AN:b.AN,Nga:[...b.$K],Jla:!0},this.Iqa(a,b),this.Xz.delete(a),this.Z7.delete(a);else{var d=this.YUa.get(a);c=[d?.reduce((e,f)=>hqc(e,f.$K),[])??[],b.$K,c?.Nga??[]].reduce((e,f)=>hqc(e,f),[]);this.Iqa(a,{AN:b.AN,Nga:c,Jla:!1});b.isPartial||this.YUa.set(a,d?[...d,b]:[b])}}async KY(a,b,c){if(!this.wY.KY)throw Error();const d=new vqc;return await this.wY.KY(new wqc({bu:a,Tca:b,eNa:c}),d)}async Lja(a){const b=d=>this.Xz.has(d)||
this.pka(d);a=__c.Rf(a,d=>d.id).filter(d=>!b(d.id));if(!(a.length<1)){var c=await oqc(this,a);await Promise.all(a.map(d=>this.zBa(d.id,c.get(d.id))))}}async zBa(a,b){if(b&&b.length!==0)for(const c of b)if(c.url){b=await pqc(this,c);this.Iqa(a,b.hob);break}}async Qha(a){a=new xqc({bu:a.id,Tca:a.sd,ZH:void 0,TO:!0});return await this.wY.Qha(a)}async ela(a,b){a=new yqc({id:a,Tca:b});return await this.wY.ela(a)}Oka(a,b){const c=a.bu,d=a.ZZ;if(c)switch(a.status){case "UPLOADING":case "PROCESSING":this.nLa(c,
b);break;case "FAILED":if(d==="NO_AUDIO_STREAM"){this.Xz.delete(c);break}this.L2(c);break;case "IMPORTED":this.Xz.delete(c)}}constructor(a,b,c,d,e=f=>window.fetch(f).then(g=>g.json())){this.wY=a;this.D_=b;this.ZH=c;this.J=d;this.fetch=e;this.oY=(zqc.G(this),new Map);this.YUa=new Map;this.LRa=3E6;this.Xz=new Map;this.Z7=new Set;this.BIa=new Map;this.dda=new Map;lqc(this)}};__c.j7b={};__c.j7b.Cib=zqc;
}).call(globalThis, globalThis._5f74ec40302898c5a55451c9fbd04240);}

}])
//# sourceMappingURL=sourcemaps/b29c192afc5bf13b.js.map