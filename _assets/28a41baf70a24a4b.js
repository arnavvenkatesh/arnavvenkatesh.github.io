(globalThis["webpackChunk_canva_web"] = globalThis["webpackChunk_canva_web"] || []).push([[73760],{

/***/ 999752:
function(_, __, __webpack_require__) {__webpack_require__.n_x = __webpack_require__.n;const __web_req__ = __webpack_require__;__web_req__(905716);__web_req__(367659);__web_req__(966859);globalThis._5f74ec40302898c5a55451c9fbd04240 = globalThis._5f74ec40302898c5a55451c9fbd04240 || {};(function(__c) {var X=__c.X;var H=__c.H;
var O7c=function(a,b){const c=b.subscribe({next:d=>{d.kind==="CREATE_COMMENT"?a.ORa(d.kE):d.kind==="DELETE_COMMENT"?a.r$a(d.Qy):d.kind==="VOTE_UPDATE"&&a.Hcb(d.LW.Qy,d.LW.LW,d.cgc?"updated":void 0)}});return()=>c.unsubscribe()},P7c=function(a,b){const c=b.subscribe({next:d=>{d.kind==="PARTICIPANT_STATUS"&&a.Pgb(d.Hfc)}});return()=>c.unsubscribe()},U7c=async function(a,b){const c=new Q7c(b.id,a.la),d=new R7c(c.Gxa,c.Ubb,a.pv,a.la,b.id,a.J,a.Eg),e=new S7c;var {Qjb:f}=await __webpack_require__.me(629152).then(()=>({Qjb:__c.N7c}));
f=new f(()=>T7c);a.connect({sessionId:b.id,Ku:d,HC:e,gU:f});a.setState({status:3,session:b,HC:e,XL:c,Ku:d,gU:f});d.zJb(b.id)},V7c={je:"live_presentation_session_actioned",Af(a){return __c.Sn({presenting_context:a.Nd==null?void 0:__c.uH(a.Nd),session_id:a.sessionId,source:a.source,action:a.action,design_id:a.bi,doctype_id:a.rn,category_id:a.Jc})}},W7c={je:"live_audience_comment_displayed",Af(a){return __c.Sn({presenting_context:a.Nd==null?void 0:__c.uH(a.Nd),session_id:a.sessionId,comment_id:a.Qy,
source:a.source,design_id:a.bi,doctype_id:a.rn,category_id:a.Jc})}},X7c={je:"live_presentation_comment_sorting_interacted",Af(a){return __c.Sn({presenting_context:a.Nd==null?void 0:__c.uH(a.Nd),session_id:a.sessionId,sort_order:a.Pv,action:a.action})}},M$=__webpack_require__(186901),Y7c=M$.EW,Z7c=M$.h5,N$=M$.sH,O$=M$.XI;var $7c=__webpack_require__(84654).t;var a8c=__webpack_require__(893360).f;var b8c=__webpack_require__(477176).B7;var c8c=H(()=>({Nj:X("documentId",1)}));var d8c=H(()=>({usb:__c.Y(2),Nj:X(3)}));var e8c=H(()=>({id:X(1)}));var f8c=H(()=>({$Mb:__c.iJ(1),aNb:__c.iJ(2,!0)}));var g8c=H(()=>({sessionId:X(1),UNb:__c.G(2,f8c)}));var Q7c=class{static G(a){__c.L(a,{lM:N$.ref,Ubb:O$.bound,Gxa:O$.bound})}Ubb(a){this.lM=a;this.la.track(W7c,{sessionId:this.sessionId,Qy:this.lM.id,source:"fullscreen_mode",bi:""})}Gxa(){this.lM=void 0}constructor(a,b){this.sessionId=a;this.la=b;this.lM=(Q7c.G(this),void 0)}};var h8c=H(()=>({sessionId:X(1),Qy:X(2)}));var i8c=H(()=>({sessionId:X(1),Qy:X(2)}));var j8c=H(()=>({sessionId:X(1),Qy:X(2)}));var k8c=H(()=>({sessionId:X(1)}));var l8c=({comments:a,Pv:b,txb:c})=>{switch(b){case "NEWEST":return a.sort((d,e)=>e.qE-d.qE);case "OLDEST":return a.sort((d,e)=>d.qE-e.qE);case "TOP_VOTED":return a.sort((d,e)=>{const f=c(e.id)-c(d.id);return f!==0?f:d.qE-e.qE});default:throw Error(`Unknown sort order: ${b}`);}};var R7c=class{static G(a){__c.L(a,{comments:N$.deep,yaa:N$.ref,Pv:N$.ref,GR:N$.shallow,YL:N$.shallow,ycb:O$.bound,d$a:O$.bound,uOa:O$.bound,ORa:O$.bound,Hcb:O$,r$a:O$.bound,u5a:O$.bound,T6:O$.bound})}ycb(a){this.Pv=a;this.uOa();this.la.track(X7c,{sessionId:this.sessionId,Pv:this.Pv.toLowerCase(),action:"change_sort_order"})}d$a(){this.uOa();this.la.track(X7c,{sessionId:this.sessionId,Pv:this.Pv.toLowerCase(),action:"refresh"})}uOa(){this.comments=l8c({comments:this.comments,Pv:this.Pv,txb:a=>this.GR.get(a)||
0})}ORa(a){this.comments.findIndex(({id:b})=>b===a.id)===-1&&(this.comments=this.Pv==="NEWEST"?[this.afb(a),...this.comments]:[...this.comments,this.afb(a)],this.kva&&this.yaa++)}r$a(a){this.comments=this.comments.filter(({id:b})=>b!==a)}u5a(){this.yaa=0}lDb(){this.kva=!1}mDb(){this.kva=!0}lPa(a){this.YL.has(a)?this.FWa(a):this.SVa(a)}constructor(a,b,c,d,e,f,g){this.nDa=a;this.Qza=b;this.pv=c;this.la=d;this.sessionId=e;this.J=f;this.Eg=g;this.comments=(R7c.G(this),[]);this.yaa=0;this.Pv="NEWEST";
this.GR=new Map;this.YL=new Set;this.kva=!1;this.Hcb=(h,k,l)=>{this.GR.set(h,k);l==="voted"?this.YL.add(h):l==="updated"&&(this.YL.has(h)?this.YL.delete(h):this.YL.add(h))};this.FWa=async h=>{try{await this.pv.FWa(new i8c({sessionId:this.sessionId,Qy:h}))}catch(k){this.J.Ub(k)}};this.SVa=async h=>{try{await this.pv.SVa(new j8c({sessionId:this.sessionId,Qy:h}))}catch(k){this.J.Ub(k)}};this.zJb=async h=>{try{const k=await this.pv.l3b(new k8c({sessionId:h}));Z7c(()=>{k.B$b.forEach(l=>{this.YL.add(l)});
k.Ogc.forEach(l=>{this.GR.set(l.Qy,l.LW)})})}catch(k){this.J.Ub(k)}};this.afb=h=>{this.GR.has(h.id)||this.GR.set(h.id,0);return{...h,nDa:()=>this.nDa(),Qza:()=>this.Qza(h),$_:!1,T6:()=>this.T6(h.id),LW:Y7c(()=>this.GR.get(h.id)||0),FSb:Y7c(()=>this.YL.has(h.id)),lPa:k=>this.lPa(k)}};this.T6=async h=>{const k=this.comments.find(({id:l})=>l===h);if(k!==void 0&&!k.$_){k.$_=!0;try{await this.pv.T6(new h8c({sessionId:this.sessionId,Qy:h}))}catch(l){this.Eg.OD({CF:__c.K("ojlXGA")}),this.J.Ub(l)}finally{Z7c(()=>
k.$_=!1)}}}}};var T7c={origin:{x:.05,width:.15,y:1,height:0},NNb:{x:{min:-100,max:100},y:{min:-500,max:-300}}};var S7c=class{static G(a){__c.L(a,{count:N$.ref,Pgb:O$.bound})}Pgb(a){this.count=a}constructor(){this.count=(S7c.G(this),0)}};var m8c,n8c;m8c=Symbol("Error starting live session");
n8c=class{static G(a){__c.L(a,{state:N$.ref,Ffa:N$.ref,KR:Y7c,connect:O$,setState:O$})}get KR(){if(this.ab.status===2)return 3;if(this.Ffa)return 2;const a=this.pv.KR;switch(a){case 2:return 0;case 1:return 1;case 0:case 3:return 2;default:throw new __c.A(a);}}async xOa(a,b){const c=this.state.session;c&&(await this.pv.xOa({sessionId:c.id,body:{data:a}}),this.setState({...this.state,session:{...this.state.session,If:b}}))}constructor(a,b,c,d,e,f,g){this.Eg=a;this.pv=b;this.J=c;this.ab=d;this.Nj=e;
this.la=f;this.Lia=g;this.state=(n8c.G(this),{status:0});this.Ffa=!1;this.I4=[];this.c_=async()=>{if(this.state.status===0){var h=this.Nj;try{const {session:k}=await this.pv.pvb(new c8c({Nj:h}));k&&await U7c(this,k)}catch(k){this.J.Ub(k)}}};this.startSession=async()=>{if(this.state.status===0||this.state.status===2){this.setState({status:1});var h=this.Nj;try{const l=await this.pv.pvb(new c8c({Nj:h}));if(l.session)await U7c(this,l.session),this.Eg.OD({CF:__c.K("dX07Ng")});else{var k=await this.pv.IYb(new d8c({Nj:h,
usb:this.Lia?.default}));await U7c(this,k.session);this.la.track(V7c,{sessionId:k.session.id,source:"fullscreen_mode",action:"new_session",bi:""})}}catch(l){this.setState({status:2}),this.Eg.OD({CF:__c.K("iUnTqw"),hH:{QL:__c.K("T9Fgtw"),onClick:this.startSession},group:m8c}),this.J.Ub(l)}}};this.TNb=async()=>{if(this.state.status===3||this.state.status===5){this.setState({...this.state,status:4});var h=this.state,k=this.state.session;try{await this.pv.hZb(new e8c({id:k.id})),this.dispose(),this.setState({status:0}),
this.la.track(V7c,{sessionId:k.id,source:"fullscreen_mode",action:"end_session",bi:""})}catch(l){l instanceof __c.eI?(this.dispose(),this.setState({status:0})):this.setState({...h,status:5})}}};this.connect=({sessionId:h,Ku:k,HC:l,gU:m})=>{this.dispose();h=this.pv.zpb(new g8c({sessionId:h,UNb:{$Mb:!1,aNb:!0}}),$7c);h=a8c(()=>new b8c)(h);this.Ffa=!1;this.ARa=h.subscribe({next:p=>{p.kind==="SESSION_EXPIRED"&&(this.dispose(),this.setState({status:0}))},error:p=>{this.state.session&&(this.dispose(),this.J.error(p),
Z7c(()=>this.Ffa=!0))}});k=O7c(k,h);l=P7c(l,h);const n=h.subscribe({next:p=>{p.kind==="CREATE_REACTION"&&m.Slb(p.reaction)}});this.I4.push(l);this.I4.push(k);this.I4.push(()=>n.unsubscribe());h.connect()};this.Wxb=h=>{if(this.state.session)switch(h){case 0:case 1:case 3:this.dispose();break;case 2:this.connect({sessionId:this.state.session.id,Ku:this.state.Ku,HC:this.state.HC,gU:this.state.gU});break;default:throw new __c.A(h);}};this.setState=h=>{this.state=h};this.dispose=()=>{this.I4.forEach(h=>
h());this.I4=[];this.ARa?.unsubscribe();this.ARa=void 0};this.pv.cYb.subscribe(this.Wxb);this.c_()}};__c.n0a={};__c.n0a.Rjb=n8c;
}).call(globalThis, globalThis._5f74ec40302898c5a55451c9fbd04240);}

}])
//# sourceMappingURL=sourcemaps/28a41baf70a24a4b.js.map