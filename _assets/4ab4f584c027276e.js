(globalThis["webpackChunk_canva_web"] = globalThis["webpackChunk_canva_web"] || []).push([[35596],{

/***/ 329422:
function(_, __, __webpack_require__) {__webpack_require__.n_x = __webpack_require__.n;const __web_req__ = __webpack_require__;__web_req__(905716);globalThis._5f74ec40302898c5a55451c9fbd04240 = globalThis._5f74ec40302898c5a55451c9fbd04240 || {};(function(__c) {var x=__c.x;
var F3=function(a){const b=Error(a);return c=>{c instanceof Error&&(c.stack==null||c.stack==="")&&(c.stack=b.stack);return c}},wpc=function(a){return new Promise((b,c)=>{const d=()=>{a.removeEventListener("success",e);a.removeEventListener("error",g)},e=()=>{d();b(a.result)},f=F3("idb promisify_request_events error"),g=()=>{d();c(f(a.error))};a.addEventListener("success",e);a.addEventListener("error",g)})},xpc=async function(a,b){const c=a.$n(a.cursor.request);a.cursor.continue(b);return c},zpc=function(a){return new Promise((b,
c)=>{const d=F3("idb_transaction error");a.CD.addEventListener("complete",()=>b());a.CD.addEventListener("error",f=>{c(d(f.target?.error||a.CD.error||Error("Unknown error")))});const e=new ypc;a.CD.addEventListener("abort",()=>{if(a.CD.error instanceof Error){var f=e.cause=a.CD.error;f=[`${f.name}`,`${f.message}`].filter(g=>!!g).join(": ");e.message=`${e.message} (${f})`}c(e)})})},Apc=function(a,b){x(b.from>=0);x(b.to>=1);x(b.to===b.from+1);const c=a.SP.length&&a.SP[a.SP.length-1];c?x(b.from===c.to):
x(b.from===0);a.SP.push(b);return a},Cpc=async function(a,b=indexedDB){try{return await G3.open({name:a.name,version:void 0,t7a:(c,d,e)=>{x(d.oldVersion===0&&d.newVersion===1,"Received unexpected upgrade");e()},yH:a.yH},b)}catch(c){if(!(c instanceof Bpc))throw c;}},Dpc=async function(a){if(a.kM)return a.kM;const b=G3.Nl({name:a.options.name,yH:{type:1,$ob:!0,apb:!0},gla:a.gla});a.kM=a.options.build(b);try{const c=await a.kM;c.addEventListener("close",()=>{a.kM=void 0});c.addEventListener("versionchange",
()=>{a.kM=void 0});return c}catch(c){throw a.kM=void 0,c;}},Fpc=function(a){return a.name==="QuotaExceededError"||a instanceof DOMException&&a.code===22?!0:Epc.some(b=>b.test(a.message))},Hpc=function(a){return!self.indexedDB||a instanceof ypc||a instanceof DOMException&&["AbortError","TransactionInactiveError"].includes(a.name)?!0:Gpc.some(b=>b.test(a.message))},Kpc=function(a){a=a instanceof Error?a:Error(String(a));return a instanceof Ipc||a instanceof Jpc?a:Fpc(a)?new Jpc(a):Hpc(a)?new Ipc(a):
a},Lpc=function(a,{a3:b}){if(!(a.fb==null||Math.random()>.01))return a.fb.ui(b,{attrs:new Map([["sample_rate_override",1]]),timeout:3E5})},Mpc=function(a,b){return{key:a,record:b}},H3=function(a){if(a==null)throw new Npc("null",0);if(typeof a!=="object"||Array.isArray(a))throw new Npc(Opc(a),JSON.stringify(a).length);if(!("key"in a&&"record"in a)||typeof a.key!=="string"||typeof a.record!=="object"||a.record==null){const b={};for(const [c,d]of Object.entries(a))b[c]=Opc(d);throw new Npc(JSON.stringify(b),
JSON.stringify(a).length);}return{key:a.key,value:a.record}},Opc=function(a){return a==null?"null":typeof a==="object"?Array.isArray(a)?"array":"object":typeof a},Spc=function({Nn:a,serializer:b,Z3b:c={},fb:d,gla:e}){return new Ppc(a,b,new Qpc(new Rpc({name:a,build:f=>Apc(f,{from:0,to:1,ueb:g=>{g=g.createObjectStore(a,{keyPath:"key"});for(const [h,{keyPath:k,...l}]of Object.entries(c))g.createIndex(h,`${"record"}.${k}`,l)}}).build({una:1,Wgb:1})},e),d))},Tpc=function(){return Spc({Nn:"config",serializer:{Ga:a=>
a,za:a=>a}})};var I3=class{async continue(a){a=await xpc(this,a);if(a!=null)return new I3(a)}async update(a){a=this.cursor.update(a);return this.$n(a)}async delete(){const a=this.cursor.delete();return this.$n(a)}constructor(a){this.cursor=a;this.$n=wpc}},Upc=class extends I3{async continue(a){a=await xpc(this,a);if(a!=null)return new Upc(a)}get value(){return this.cursor.value}constructor(a){super(a);this.cursor=a}};var Vpc=class{async get(a){a=this.index.get(a);return this.$n(a)}async getAll(a,b){a=this.index.getAll(a,b);return this.$n(a)}async getAllKeys(a,b){a=this.index.getAllKeys(a,b);return this.$n(a)}async count(a){a=this.index.count(a);return this.$n(a)}async openCursor(a,b){a=this.index.openCursor(a,b);a=await this.$n(a);return a!=null?new Upc(a):void 0}async openKeyCursor(a,b){a=this.index.openKeyCursor(a,b);a=await this.$n(a);return a!=null?new I3(a):void 0}constructor(a){this.index=a;this.$n=wpc}};var Wpc=class{index(a){return new Vpc(this.store.index(a))}async put(a,b){a=this.store.put(a,b);return this.$n(a)}async get(a){a=this.store.get(a);return this.$n(a)}async delete(a){a=this.store.delete(a);return this.$n(a)}async clear(){const a=this.store.clear();return this.$n(a)}async getAll(a,b){a=this.store.getAll(a,b);return this.$n(a)}async getAllKeys(a,b){a=this.store.getAllKeys(a,b);return this.$n(a)}async count(a){a=this.store.count(a);return this.$n(a)}async openCursor(a,b){a=this.store.openCursor(a,
b);a=await this.$n(a);return a!=null?new Upc(a):void 0}async openKeyCursor(a,b){a=this.store.openKeyCursor(a,b);a=await this.$n(a);return a!=null?new I3(a):void 0}createIndex(a,b,c){return this.store.createIndex(a,b,c)}deleteIndex(a){return this.store.deleteIndex(a)}constructor(a){this.store=a;this.$n=wpc}};var Xpc=class{objectStore(a){a=this.CD.objectStore(a);return new Wpc(a)}abort(){this.CD.abort()}commit(){this.CD.commit?.()}get error(){return this.CD.error}constructor(a){this.CD=a;this.NSb=zpc(this)}},ypc=class extends Error{constructor(){super("Transaction was aborted")}};var G3=class{static Nl(a){return new Ypc(a.name,a.yH,a.gla??indexedDB)}static open({name:a,version:b,t7a:c,yH:d},e=indexedDB){return new Promise((f,g)=>{try{const h=e.open(a,b);let k,l=!1;c&&h.addEventListener("upgradeneeded",n=>{const p=h.result,q=__c.z(h.transaction);if(l)q.abort(),p.close();else{k=new G3(p);try{c(k,n,()=>{throw new Bpc;})}catch(r){q.abort(),p.close(),g(r)}}});switch(d.type){case 0:d.lFb&&h.addEventListener("blocked",d.lFb);h.addEventListener("success",()=>{f(k??new G3(h.result))});
break;case 1:h.addEventListener("blocked",()=>{l=!0;g(new Zpc)});h.addEventListener("success",()=>{const n=h.result;l?n.close():(n.addEventListener("versionchange",p=>{(d.$ob&&p.newVersion==null||d.apb&&p.newVersion!=null)&&n.close()}),f(k??new G3(n)))});break;default:throw new __c.A(d);}const m=F3("idb_database open error");h.addEventListener("error",()=>{g(m(h.error))})}catch(h){g(h)}})}transaction(a,b){return new Xpc(this.db.transaction(a,b))}createObjectStore(a,b){return new Wpc(this.db.createObjectStore(a,
b))}deleteObjectStore(a){this.db.deleteObjectStore(a)}get objectStoreNames(){return this.db.objectStoreNames}get version(){return this.db.version}close(){this.db.close()}addEventListener(a,b,c){this.db.addEventListener(a,b,c)}removeEventListener(a,b,c){this.db.removeEventListener(a,b,c)}static delete({name:a},b=indexedDB){return new Promise((c,d)=>{const e=F3("idb_database delete error"),f=b.deleteDatabase(a);f.addEventListener("blocked",()=>d(new $pc));f.addEventListener("error",()=>{d(e(f.error))});
f.addEventListener("success",()=>c())})}constructor(a){this.db=a}},Ypc=class{async build(a){this.zja&&(x(a.una===void 0||a.una>=this.zja.to),x(a?.Wgb>=this.zja.to));x(this.SP.length>0);const b=a?.una??this.zja?.to??1;var c=this.SP[this.SP.length-1].to;a=a?.Wgb??c;__c.u(a<=c);const d=await Cpc({name:this.name,yH:this.yH},this.S0a);if(d!=null){if(d.version>c)throw d.close(),new aqc(d.version,c);if(d.version>=a)return d;d.close()}try{return await this.openDatabase(a)}catch(e){if(e instanceof Zpc){c=
await this.openDatabase(void 0);if(c.version<b)throw c.close(),new bqc(c.version,b);return c}throw e;}}openDatabase(a){return G3.open({name:this.name,version:a,t7a:(b,c)=>{if(c.newVersion!=null){var d=c.oldVersion;for(const e of this.SP){if(d===c.newVersion)break;if(!(d>=e.to)){if(e.from!==d)throw new cqc(d);if(e.to>c.newVersion)throw new cqc(c.newVersion);e.ueb(b);d=e.to}}if(d!==c.newVersion)throw new cqc(c.newVersion);}},yH:this.yH},this.S0a)}constructor(a,b,c){this.name=a;this.yH=b;this.S0a=c;
this.SP=[];this.zja=void 0}},$pc=class extends Error{constructor(){super("Deletion blocked due to open connections")}},Zpc=class extends Error{constructor(){super("Operation blocked due to open connections")}},bqc=class extends Error{constructor(a,b){super(`Current DB version ${a} is less than minimum allowed ${b}`);this.currentVersion=a;this.una=b}},aqc=class extends Error{constructor(a,b){super(`Current DB version ${a} is greater than maximum allowed ${b}`);this.currentVersion=a}},cqc=class extends Error{constructor(a){super(`Database version ${a} is no longer supported and cannot be upgraded`);
this.version=a}},Bpc=class extends Error{constructor(){super("AbortError")}};var Rpc=class{async dD(a,b,c){const d=(await Dpc(this)).transaction(a,b);a=d.NSb;try{const [e]=await Promise.all([(async()=>{const f=await c(d);d.commit();return f})(),a]);return e}catch(e){try{d.abort()}catch(f){if(!(f instanceof Error&&f.name==="InvalidStateError"))throw f;}await a.catch(()=>{});throw e;}finally{}}close(){this.kM?.catch(()=>{}).then(a=>a?.close());this.kM=void 0}constructor(a,b=globalThis.indexedDB){this.options=a;this.gla=b}};var Jpc=class extends Error{constructor(a){super("Quota exceeded");this.cause=a}},Ipc=class extends __c.Ac{constructor(a){super("IndexedDb Database Error",0);this.cause=a}},dqc=class extends Error{constructor(a){super("Failed to deserialize stored data");this.cause=a}};var Epc=[/Encountered full disk while opening backing store for indexedDB.open./i,/Failed to PutOrAdd in database because not enough space for domain/i],Gpc=[/(transaction|operation) was aborted/i,/The database connection is closing/i,/connection to indexed database server lost/i,/internal error/i,/the transaction is inactive or finished/i,/unable to open database file on disk/i,/without an in-progress transaction/i,/The user denied permission to access the database\./];var Qpc=class{async dD({sK:a,mode:b,methodName:c},d){c=Lpc(this,{a3:`idb_transaction_executor.run_in_transaction.${c}`});self.clearTimeout(this.hVa);try{return await this.R0a.dD(a,b,d)}catch(e){const f=Kpc(e);f instanceof Ipc&&(c?.setAttribute("error",e instanceof Error?e.message:String(e)),c?.end("error"));throw f;}finally{c?.end("ok"),self.clearTimeout(this.hVa),this.hVa=self.setTimeout(()=>this.R0a.close(),2500)}}constructor(a,b){this.R0a=a;this.fb=b}};var Ppc=class{async put(a,b){const c=Mpc(a,this.serializer.Ga(b));return this.LI.dD({sK:this.Nn,mode:"readwrite",methodName:"put"},async d=>{await d.objectStore(this.Nn).put(c)})}async get(a){const b=await this.LI.dD({sK:this.Nn,mode:"readonly",methodName:"get"},async c=>c.objectStore(this.Nn).get(a));if(b!=null)return this.za(H3(b).value)}async delete(a){return this.LI.dD({sK:this.Nn,mode:"readwrite",methodName:"delete"},async b=>{const c=b.objectStore(this.Nn);Array.isArray(a)?await Promise.all(a.map(d=>
c.delete(d))):await c.delete(a)})}async count(){return this.LI.dD({sK:this.Nn,mode:"readonly",methodName:"count"},async a=>a.objectStore(this.Nn).count())}async update(a,b){return this.LI.dD({sK:this.Nn,mode:"readwrite",methodName:"update"},async c=>{const d=c.objectStore(this.Nn);c=Array.isArray(a)?a:[a];await Promise.all(c.map(async e=>{var f=await d.get(e);let g;f!=null&&(g={value:this.za(H3(f).value)});f=b(g,e);f!=null?await d.put(Mpc(e,this.serializer.Ga(f.value))):await d.delete(e)}))})}async updateAll(a,
b,c){return this.LI.dD({sK:this.Nn,mode:"readwrite",methodName:"updateAll"},async d=>{const e=d.objectStore(this.Nn);d=await (typeof c==="string"?e.index(c):e).getAll(b);await Promise.all(d.map(async f=>{const {key:g,value:h}=H3(f);f=a({value:this.za(h)},g);f!=null?await e.put(Mpc(g,this.serializer.Ga(f.value))):await e.delete(g)}))})}async getAll(a,b){var c=await this.LI.dD({sK:this.Nn,mode:"readonly",methodName:"getAll"},async f=>{f=f.objectStore(this.Nn);const g=typeof b==="string"?f.index(b):
f;try{return(await g.getAll(a)).map(h=>(0,__c.Ba)(H3(h)))}catch{return f=await g.getAllKeys(a),Promise.all(f.map(async h=>{try{const k=await g.get(h);return(0,__c.Ba)(H3(k))}catch(k){return(0,__c.Ca)({key:h,error:k instanceof Error?k:Error(String(k))})}}))}});const d=[],e=[];for(const f of c){if(!f.ok){e.push(f.error);continue}c=f.value.key;const g=f.value.value;try{d.push({key:c,O:this.za(g)})}catch(h){e.push({key:c,error:h instanceof Error?h:Error(String(h))})}}return{items:d,errors:e}}async getAllKeys(){return this.LI.dD({sK:this.Nn,
mode:"readonly",methodName:"getAllKeys"},async a=>(await a.objectStore(this.Nn).getAllKeys()).map(b=>String(b))||[])}async clear(){return this.LI.dD({sK:this.Nn,mode:"readwrite",methodName:"clear"},async a=>a.objectStore(this.Nn).clear())}za(a){try{return this.serializer.za(a)}catch(b){throw new dqc(b instanceof Error?b:Error(String(b)));}}constructor(a,b,c){this.Nn=a;this.serializer=b;this.LI=c}},Npc=class extends Error{constructor(a,b){super(`Unexpected record received: ${a}. Record length: ${b}.`)}};__c.Oba={i3b:async function(a){return Promise.race([(async()=>{try{return await Tpc().get("userAgent")}catch(b){a.Ub(b)}})(),__c.dn(1E4).then(()=>{})])},gMb:async function(){await Tpc().put("userAgent",navigator.userAgent)}};
}).call(globalThis, globalThis._5f74ec40302898c5a55451c9fbd04240);}

}])
//# sourceMappingURL=sourcemaps/4ab4f584c027276e.js.map