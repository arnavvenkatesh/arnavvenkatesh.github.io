(globalThis["webpackChunk_canva_web"] = globalThis["webpackChunk_canva_web"] || []).push([[43432],{

/***/ 290120:
function(_, __, __webpack_require__) {__webpack_require__.n_x = __webpack_require__.n;const __web_req__ = __webpack_require__;__web_req__(905716);__web_req__(258551);globalThis._5f74ec40302898c5a55451c9fbd04240 = globalThis._5f74ec40302898c5a55451c9fbd04240 || {};(function(__c) {var z0=__c.z0;var L=__c.L;
var jKc=async function(a,b){return a.uta(b,async()=>{if(a.ZXa==null)throw Error("Scene document resources are not supported");const c=await a.ZXa.Hr({id:b,version:1},void 0),d={id:c.id,files:{Y_a:c.content.url,RIa:c.Rc?.url}};(0,__c.$b)(()=>{a.scenes.set(d.id,d)});return d})},mKc=function(a,b){if(a.Kh.Lhb&&b instanceof kKc)return new lKc(a.Kh.Lhb,b);throw Error("GltfResource needs GltfResource");},oKc=function(a){return nKc?new kKc(a):new kKc(a,{environment_sdr:"https://smartmockups-web-assets.s3.us-east-1.amazonaws.com/default_octahedral_packed_sdr.png",environment_gain:"https://smartmockups-web-assets.s3.us-east-1.amazonaws.com/default_octahedral_packed_gain.png"})},
pKc=function(a,b,c){let d=b-1,e=0,f=c-1,g=0;for(let h=0;h<c;h++)for(let k=0;k<b;k++)a[3+(h*b+k)*4]!==0&&(d=Math.min(d,k),e=Math.max(e,k),f=Math.min(f,h),g=Math.max(g,h));a=g-f+1;return{left:d,top:c-(f+a),width:e-d+1,height:a}},qKc=function(a,b,c){const d=a.store.XE?a.Kh.canvas:a.store.JE;if(d){var e=c.getContext("2d");if(!e)throw Error("Unable to create 2d context");a.store.XE&&a.render(!1);c.width=b;c.height=b;e.drawImage(d,0,0,b,b)}},rKc=function(a,b){a.store.container=b;b.contains(a.Kh.canvas)||
b.appendChild(a.Kh.canvas)},sKc=function(a){if(a.store.Ne){const b=requestAnimationFrame(()=>sKc(a));a.store.aga=b;a.render(a.store.AYa)}},vKc=function({Hka:a,Kh:b}){const c=new tKc;return new uKc(c,a,b)},wKc=function(a){var b=__c.z(a.store.container,"Missing container"),c=a.vg.XZ;b.style.width=2E3*a.vg.da+"px";b.style.height=2E3*a.vg.da+"px";b.style.left=`-${c.left*a.vg.da}px`;b.style.top=`-${c.top*a.vg.da}px`;b.style.position="absolute";c=new Image;{var d=a.vg;b=a.B_(b);const e=d.store.XE?d.Kh.canvas:
d.store.JE;e?(d.store.XE&&(N7(d.Kh,b,b),d.render(!1)),d=e.toDataURL("image/png")):d=""}c.src=d;a.store.jN=c},yKc=function(a){var b=__c.z(a.store.container,"Missing container");b.style.position="init";b.style.left="0";b.style.top="0";b.style.width="100%";b.style.height="100%";const c=document.createElement("canvas");var d=a.vg;b=a.B_(b);if(d.store.isInitialized){var e=c.getContext("2d");if(!e)throw Error("Unable to create 2d context");var f=b/2E3,g=d.F8();c.width=f*g.width;c.height=f*g.height;const h=
xKc(d.Kh);N7(d.Kh,b,b);d.render(!1);e.drawImage(d.Kh.canvas,g.left*f,g.top*f,g.width*f,g.height*f,0,0,g.width*f,g.height*f);N7(d.Kh,h.width,h.height)}else if(d.store.JE){e=c.getContext("2d");if(!e)throw Error("Unable to create 2d context");f=d.store.zga;g=d.store.IS/2E3;b/=2E3;c.width=Math.round(b*f.width);c.height=Math.round(b*f.height);e.drawImage(d.store.JE,f.left*g,f.top*g,f.width*g,f.height*g,0,0,c.width,c.height)}d=new Image;d.src=c.toDataURL("image/png");a.store.jN=d;c.width=1;c.height=1},
zKc=function(a){const b=a.an;a=__c.HN.create({...__c.hD,image:{...__c.ZIb,media:{...__c.FEb,id:a.sJ,version:1},Bb:void 0}});return O7(b,{fill:a})},CKc=function({kjb:a,ekb:b,$jb:c,dia:d,ozb:e,an:f,ora:g}){switch(d){case 1:return O7(c,{});case 3:return O7(AKc,{O9:e||""});case 0:return O7(b,{});case 2:return O7(zKc,{an:f,sJ:g||""});case 4:return O7(a,{});case 5:return O7(BKc,{});default:throw new __c.A(d);}},JKc=function({Pp:a,ke:b,an:c,hA:d,Kh:e,eqa:f,exports:g,i7:h}){const k=new DKc,l=new EKc(k,a,
b,d,e,f,h),m=FKc(a),n=GKc(a),p=()=>O7("div",{children:"Error"});return HKc(()=>{P7(()=>{l.initialize();return()=>{l.destroy()}},[]);P7(()=>{l.W2&&l.ii&&g.Rlb&&g.Rlb()});return O7(IKc,{Kd:l.Kd,children:O7(CKc,{dia:l.dia,ozb:l.O9,selected:l.ii,ora:l.ora,an:c,$jb:n,ekb:m,kjb:p})})})},MKc=function(a){return KKc(({data:b,De:{an:c},Ci:{ke:d}})=>{const e=LKc(()=>JKc({Pp:b,ke:d,an:c,...a}),[b,d,c]);return O7("div",{className:"N73IPQ",children:O7(e,{})})})},OKc=function(a,b,c){a=a.startSpan("load_resource",
c);return NKc(a,b)},NKc=function(a,b){return(typeof b==="function"?b():b).catch(c=>{a.setStatus("error");throw c;}).finally(()=>{a.end()})},N7=function(a,b,c){a.canvas.width=b;a.canvas.height=c},PKc=function(a,b){a.Gba=a.Gba.filter(c=>c!==b)},xKc=function(a){return{width:a.canvas.width,height:a.canvas.height}},RKc=async function(a){a.CQ||(a.CQ=Q7());try{const [{default:b,WebGlRenderer:c},{default:d}]=await Promise.all([__webpack_require__.me(19779),__webpack_require__.me(104993)]);await b({path:d});
a.mQa=c}catch(b){throw a.R4=void 0,Error("Failed to initialize renderer",{cause:b});}try{a.IQ=QKc(a)}catch(b){a.J.info(`Unable to initialize WebGL context error: ${b}`),R7(()=>{a.cva=!0})}},Q7=function(){const a=document.createElement("canvas");a.width=1E3;a.height=1E3;a.style.width="100%";a.style.visibility="visible";return a},QKc=function(a,b=0){if(b>5)throw Error("Unable to recreate context");const c=SKc(a);a.IQ=new (__c.z(a.mQa))(c);a.IQ.onContextLost=()=>{a.J.info("WebGL context lost for scene widget");
a.IQ=void 0;a.R4=void 0;a.YFa=()=>{const d=a.canvas;a.CQ=Q7();a.mQa&&QKc(a,b+1);a.Gba.forEach(e=>e(d));a.YFa=void 0}};return a.IQ},SKc=function(a){a=a.canvas;let b;const c=e=>{b=e.statusMessage??"Unknown"};a.addEventListener("webglcontextcreationerror",c);const d=a.getContext("webgl");a.removeEventListener("webglcontextcreationerror",c);if(d!=null)return d;throw Error(b);};
__c.Vp.prototype.uta=__c.fa(8,function(a,b){const c=this.Ai.get(__c.Sp(a));if(c!=null&&c.I$a!=null){const e=this.hY.get(c);if(e!=null)return Promise.resolve({...c,element:e})}const d=__c.Sp(a);if(a=this.pending.get(d))return a;c!=null&&c.I$a!=null&&(b=async()=>{const e=await __c.Up(this,c);return{...c,element:e}});b=b().finally(()=>this.pending.delete(d));this.pending.set(d,b);return b});
__c.Wp.prototype.uta=__c.fa(7,function(a,b){var c=this.scenes.get(a);if(c)return Promise.resolve(c);if(c=this.pending.get(a))return c;b=b().finally(()=>this.pending.delete(a));this.pending.set(a,b);return b});var TKc=__webpack_require__(19779),lKc=TKc.GltfRenderer,kKc=TKc.GltfResource;var S7=__webpack_require__(186901),T7=S7.EW,R7=S7.h5,U7=S7.mJ,V7=S7.sH,W7=S7.XI;var UKc=__webpack_require__(322594),O7=UKc.jsx,VKc=UKc.jsxs;var X7=__webpack_require__(205482),KKc=X7.memo,P7=X7.useEffect,LKc=X7.useMemo,WKc=X7.useRef,XKc=X7.useState;var HKc=__webpack_require__(721226).PA;var nKc=__c.vc("1aab289f",!1),YKc=class{constructor(a){this.Kh=a}};var ZKc=class{static G(a){L(a,{selected:V7.ref,$sa:V7.ref,Zsa:V7.ref,X9:V7.ref,PAb:V7.ref})}constructor(a){this.vg=a;this.selected=(ZKc.G(this),!1);this.Zsa=this.$sa=!1;this.X9=0;this.PAb=!1}};var uKc=class{static G(a){L(a,{initialize:W7,uub:W7,yMa:W7,qcb:W7,dispose:W7,F8:W7,Pka:W7,Gdb:W7})}async initialize(a){this.store.isInitialized||this.store.Kd||(this.store.Kd=!0,a=oKc(a),this.store.Ika=a,await a.load(),a===this.store.Ika&&(this.store.XE=mKc(this.Hka,a),this.Kh.Gba.push(this.Pka),this.render(!0),R7(()=>{this.store.isInitialized=!0;this.store.Kd=!1})))}uub(a,b,c=!0){const d=this.F8();this.store.XZ=d;a=Math.round(Math.min(a.width*2E3/d.width,2E3));N7(this.Kh,a,a);this.store.IS=a;this.store.da=
b;this.store.AYa=c;this.Gdb()}get IS(){return this.store.IS}get XZ(){return this.store.XZ}yMa(){this.store.Ne=!1;this.store.aga!=null&&(cancelAnimationFrame(this.store.aga),this.store.aga=void 0)}qcb(a){this.store.WR=a}async dispose(){this.yMa();if(this.isInitialized&&this.store.container?.contains(this.Kh.canvas)){this.store.zga=this.F8();var a=document.createElement("canvas");qKc(this,this.store.IS,a);this.store.JE=a}this.store.XE?.dispose();this.store.XE=void 0;this.store.isInitialized=!1;PKc(this.Kh,
this.Pka);this.store.Kd=!1;a=this.store.Ika;this.store.Ika=void 0;await a?.load();a?.dispose()}F8(){if(this.store.Aga&&this.store.WR===this.store.Aga?.wIb)return this.store.Aga.ia;var a=xKc(this.Kh);N7(this.Kh,2E3,2E3);this.render(!1);const b=this.Kh.getImageData();N7(this.Kh,a.width,a.height);a=this.qwb(b.data,b.width,b.height);this.store.Aga={wIb:this.store.WR,ia:a};return a}get isInitialized(){return this.store.isInitialized}get Kd(){return this.store.Kd}get Ne(){return this.store.Ne}get da(){return this.store.da}Gdb(){this.yMa();
this.store.Ne=!0;sKc(this)}render(a){this.store.XE?.render({distance:1,rotationPhi:this.store.WR.rotation.x,rotationTheta:this.store.WR.rotation.y,enableGrid:a})}constructor(a,b,c,d=pKc){this.store=a;this.Hka=b;this.Kh=c;this.qwb=d;this.Pka=(uKc.G(this),e=>{R7(()=>{const f=this.store.Ika,g=this.store.container;g&&this.store.isInitialized&&f&&(g.contains(e)&&g.removeChild(e),rKc(this,g),this.store.XE?.dispose(),this.store.XE=void 0,this.store.XE=mKc(this.Hka,f),this.Kh.Gba.push(this.Pka),this.store.isInitialized=
!0)})})}};var tKc=class{static G(a){L(a,{Ne:V7.ref,WR:V7.ref,aga:V7.ref,JE:V7.ref,zga:V7.ref,Aga:V7.ref,isInitialized:V7.ref,Kd:V7.ref,da:V7.ref,XZ:V7.ref})}constructor(){this.container=(tKc.G(this),void 0);this.AYa=this.Ne=!1;this.WR={rotation:{x:0,y:0,z:0}};this.zga={left:0,top:0,width:1,height:1};this.Kd=this.isInitialized=!1;this.da=1;this.XZ={left:0,top:0,width:1,height:1};this.IS=0}};var $Kc=({xAb:a})=>VKc("div",{className:"Wfem7A",children:[O7("div",{className:"CSoSRg"}),O7("div",{className:"__J59g",style:{width:a?"100%":"init",height:a?"init":"100%",aspectRatio:"1"},children:O7("div",{className:"tEhdig"})})]}),IKc=({children:a,Kd:b})=>{const c=WKc(null),[d,e]=XKc(!1);P7(()=>{c.current&&e(c.current.clientWidth>=c.current.clientHeight)},[c]);return b?O7("div",{ref:c,className:"uDEnGQ",children:VKc("div",{className:"E8BDLQ",children:[O7("div",{className:"II7r4Q",children:a}),O7($Kc,
{xAb:d})]})}):a};var aLc=({wFb:a,vFb:b})=>{const c=WKc(null);P7(()=>{const d=c.current;c.current&&a(c.current);return()=>{d&&b()}},[c,a,b]);return O7("div",{ref:c,style:{display:"block",position:"absolute"}})};var bLc=class{get vg(){return this.local.vg}constructor(a){this.local=a;this.Hxb=b=>{const c=this.vg.XZ;b.style.width=2E3*this.vg.da+"px";b.style.height=2E3*this.vg.da+"px";b.style.left=`-${c.left*this.vg.da}px`;b.style.top=`-${c.top*this.vg.da}px`;rKc(this.vg,b)};this.Gxb=()=>{var b=this.vg;if(b.isInitialized&&b.store.container?.contains(b.Kh.canvas)){b.store.zga=b.F8();const c=document.createElement("canvas");qKc(b,b.store.IS,c);b.store.JE=c}b.store.container?.removeChild(b.Kh.canvas);b.store.container=
void 0}}};var GKc=({local:a})=>{const b=new bLc(a);return()=>O7(aLc,{wFb:b.Hxb,vFb:b.Gxb})};var cLc=({jN:a,VFb:b,onDispose:c})=>{const d=WKc(null);P7(()=>{d.current&&b(d.current);return()=>c()},[d,b,c]);P7(()=>{d.current&&a&&(a.style.width="100%",a.style.height="100%",d.current.firstChild&&d.current.removeChild(d.current.firstChild),d.current.appendChild(a))},[d,a]);return O7("div",{ref:d,style:{width:"100%",height:"100%"}})};var dLc=__c.vc("75810be2",!1),eLc=class{static G(a){L(a,{initialize:W7.bound,dispose:W7.bound,NXa:W7})}initialize(a){dLc||(this.store.container=a,this.store.OXa=U7(()=>[this.vg.store.WR,this.vg.Ne],this.Kxb,{fireImmediately:!1}),this.store.LXa=U7(()=>this.local.Zsa,this.Ixb,{fireImmediately:!0}))}dispose(){this.NXa();this.store.OXa?.();this.store.OXa=void 0;this.store.LXa?.();this.store.LXa=void 0}get jN(){return this.store.jN}B_(a){a=a.getBoundingClientRect();return Math.max(a.width,a.height)>100?
this.vg.IS:300}get vg(){return this.local.vg}NXa(){this.store.jN=void 0}constructor(a,b){this.store=a;this.local=b;this.Kxb=(eLc.G(this),()=>{this.vg.Ne||(this.local.Zsa?wKc(this):yKc(this))});this.Ixb=()=>{this.local.Zsa?wKc(this):yKc(this)}}};var fLc=class{static G(a){L(a,{jN:V7.ref})}constructor(){this.container=(fLc.G(this),void 0)}};var FKc=({local:a})=>{const b=new fLc,c=new eLc(b,a);return HKc(()=>O7(cLc,{VFb:c.initialize,onDispose:c.dispose,jN:c.jN}))};var BKc=()=>O7("div",{className:"_7SJjPA"});var AKc=({O9:a})=>O7("img",{src:a,style:{maxWidth:"100%",maxHeight:"100%",width:"auto",height:"auto"}});var EKc=class{static G(a){L(a,{initialize:W7,destroy:W7,dia:T7,Kd:T7,isError:T7,O9:T7,ZB:T7,ii:T7,h0a:W7,m0a:W7,n0a:W7})}async initialize(){this.store.psb=U7(()=>this.ZB,this.h0a,{fireImmediately:!0});const a=await jKc(this.hA,this.Pp.D.scene.id);R7(()=>{this.store.scene=a})}destroy(){this.ZB&&this.Pp.local.X9--;this.Pp.local.X9===0&&this.vg.dispose();this.store.psb?.();this.store.Zza?.();this.store.Yza?.();this.store.PXa?.()}get dia(){return this.JEa&&this.ZB&&!this.vg.Ne||this.ZB&&this.JEa&&!this.ii||
!this.ZB&&this.JEa?0:this.yAb&&this.vg.Ne?1:this.ora?2:this.O9?3:this.isError?4:5}get Kd(){return this.ZB&&this.ii&&!this.vg.isInitialized}get isError(){return!!this.store.scene&&!this.store.scene.files.RIa}get O9(){return this.store.scene?.files.RIa}get JEa(){return this.Pp.local.$sa}get ora(){return this.Pp.D.config.ref.snapshot?.id}get ZB(){return!this.i7&&this.ke===30&&!this.Kh.J2a}get W2(){return this.store.W2}get ii(){return this.Pp.local.selected}get yAb(){return this.ZB&&this.ii&&this.vg.isInitialized}get vg(){return this.Pp.local.vg}get D(){return this.Pp.D}constructor(a,
b,c,d,e,f,g){this.store=a;this.Pp=b;this.ke=c;this.hA=d;this.Kh=e;this.eqa=f;this.i7=g;this.Uxb=(EKc.G(this),()=>{if(!this.Pp.local.$sa){var h=this.vg;h.store.JE&&(h.store.JE.width=1,h.store.JE.height=1,h.store.JE=void 0)}});this.h0a=(h,k)=>{this.store.Zza?.();this.store.Yza?.();this.store.PXa?.();k&&this.Pp.local.X9--;this.ZB?(this.Pp.local.X9++,this.store.Zza=U7(()=>({selected:this.ii,scene:this.store.scene}),({selected:l,scene:m})=>this.m0a(l,m),{fireImmediately:!0}),this.store.Yza=U7(()=>[this.Pp.D.config.ref.rotationPhi,
this.Pp.D.config.ref.rotationTheta],this.Nxb,{fireImmediately:!0}),this.store.PXa=U7(()=>[this.Pp.local.$sa],this.Uxb,{fireImmediately:!1})):this.store.Zza=U7(()=>({selected:this.ii}),({selected:l})=>this.n0a(l),{fireImmediately:!0})};this.m0a=async(h,k)=>{if(k!=null)if(!h)this.vg.dispose();else if(!this.vg.Kd){var l=__c.z(k.files.Y_a);await this.Kh.JSb;this.Kh.J2a||(h=this.eqa.startSpan("select"),await OKc(this.eqa,async()=>{await this.vg.initialize(l)},h),h.end())}};this.n0a=h=>{this.store.W2=this.i7;
h||(this.store.W2=!1)};this.Nxb=()=>{this.vg.Ne||this.vg.qcb({rotation:{x:this.Pp.D.config.ref.rotationPhi,y:this.Pp.D.config.ref.rotationTheta,z:0}})}}};var DKc=class{static G(a){L(a,{scene:V7.ref,W2:V7.ref})}constructor(){this.Yza=(DKc.G(this),void 0);this.W2=!1}};var gLc=class{startSpan(a,b){a=`scene.${a}`;return b?this.fb.startSpan(a,b):this.fb.ui(a,{Oq:{name:`editor.${a}`,performance:{AJ:!0}}})}constructor(a){this.fb=a}};var hLc=__c.vc("5eb77351",!1),iLc=navigator!=null&&!!navigator.userAgent.match(/iphone|ipad/gi)||hLc,jLc=class{static G(a){L(a,{cva:V7.ref})}get J2a(){return this.cva}get JSb(){this.YFa&&this.YFa();this.R4||(this.R4=RKc(this));return this.R4}get canvas(){this.CQ||(this.CQ=Q7());return this.CQ}get Lhb(){return this.IQ}getImageData(){__c.x(this.IQ!=null,"WebGlRenderer is not initialized");return this.IQ.readPixels()}constructor(a){this.J=a;this.CQ=(jLc.G(this),void 0);this.Gba=[];this.cva=!1;iLc||(this.CQ=
Q7(),this.R4=RKc(this))}};var kLc=__c.XZ()(()=>({GYb(a,b,c){return{data:{D:{scene:{type:"scene",id:a,version:0},config:{snapshot:void 0,rotationPhi:6.02138592,rotationTheta:.08726646}},document:{}},P:{width:b,height:c}}},HYb(a,b,c,d){return{data:{D:{scene:{type:"scene",id:a,version:0},config:{snapshot:b,rotationPhi:6.02138592,rotationTheta:.08726646}},document:{}},P:{width:c,height:d}}}}));var lLc=__c.h_({D:__c.g_({scene:z0.Km(1,"SceneRef"),config:z0.Mwa(2,{snapshot:z0.UGb(1,"MediaRef"),rotationPhi:z0.bYa(2,{min:0,max:6.284}),rotationTheta:z0.bYa(3,{min:-1.571,max:1.571})})})});var mLc,nLc;mLc=__c.vc("646956e3",!1);nLc=__c.IZ()(({si:a,ZL:b})=>{var c=b.fb;b=b.J.$f("scene_widget_rendering");c=new gLc(c);const d=new jLc(b),e=new YKc(d),f=navigator!=null&&!!navigator.userAgent.match(/iphone|ipad/gi)&&!mLc;b={i7:f};a=MKc({hA:a.hA,Kh:d,eqa:c,exports:b,i7:f});return{metadata:{type:"scene",name:__c.K("6XoKOg"),bW:g=>g.scene.id},F6:()=>{const g=vKc({Hka:e,Kh:d});return new ZKc(g)},D:__c.HZ(a),exports:b}});__c.A_={};__c.A_.nVb=ZKc;__c.A_.Bh=kLc;__c.A_.Oo=nLc;__c.A_.Ch=lLc;
}).call(globalThis, globalThis._5f74ec40302898c5a55451c9fbd04240);}

}])
//# sourceMappingURL=sourcemaps/8d0450927537e3a2.js.map